# 기본형 데이터와 참조형 데이터

<br />

## 1-1 : 데이터 타입의 종류

### 1. 기본형 (primitive type) 데이터

- Number
- String
- Boolean
- null
- undefined
- Symbol

### 2. 참조형 (reference type) 데이터

- Object
  - Array
  - Function
  - Date
  - Regexp (정규표현식)
  - Map, WeakMap
  - Set, WeakSet

### 3. 기본형/참조형 데이터를 구분하는 기준

#### 할당/연산이 이루어 질 때

- 기본형 : 할당이나 연산시 데이터 복제
- 참조형 : 할당이나 연산시 데이터 참조 (값이 담긴 주솟값 묶음을 복제)

#### 불변성 vs 가변성

- 기본형 : 불변성 (기존에 값이 있는 주소에 위치한 해당 값을 변경 불가능한 것)을 가짐
- 참조형 : 가변성 (기존에 값이 있는 주소에 위치한 해당 값을 변경 가능한 것)을 가짐

## 1-2 : 데이터 타입에 관한 배경지식

### 1. 메모리와 데이터

- 비트 : 컴퓨터는 모든 데이터를 0 또는 1로 바꿔 기억하는데, 이 때 0 또는 1만 표현할 수 있는 하나의 메모리 조각. 메모리는 매우 많은 비트들로 구성되어 있으며, 각 비트는 고유한 식별자를 통해 위치 확인
- 바이트 : 1바이트는 8비트로 구성
- 모든 데이터는 바이트 단위의 식별자 (=메모리 주솟값)을 통해 서로 구분 및 연결

### 2. 식별자와 변수

- 변수 : 변할 수 있는 무언가 (여기서 무언가는 데이터로, 숫자, 문자열, 객체, 배열 모두 해당)
- 식별자 : 위 변수의 이름

## 1-3 : 변수 선언과 데이터 할당

### 변수 선언의 동작 원리

```jsx
var a;
//변할 수 있는 데이터를 만든다. 이 데이터의 식별자는 a로 한다.
//변수 = 변경 가능한 데이터가 담길 수 있는 공간 또는 그릇
```

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/4ae775f8-6e88-433a-9a88-ea5d9bd70b61/Untitled.png)

### 데이터 할당의 동작 원리

```jsx
var a;
// 메모리의 빈 공간에 식별자 저장하고 자동으로 undefined 할당

a = "abc";
// 별도의 공간에 데이터 저장 후, 그 공간의 주소를 변수의 값 영역에 할당

var a = "abc";
//변수 선언과 할당을 한 문장에 표현

var a = "abcdef";
```

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/d4509ea3-607c-432c-bc63-c50c76f99663/Untitled.png)

1. 변수 영역에서 빈공간 (@1003) 확보
2. 확보한 공간의 식별자를 a로 지정
3. 데이터 영역의 빈공간(@5004)에 문자열 'abc'를 지정
4. 변수 영역에서 a라는 식별자를 검색한다(@1003)
5. 앞서 저장한 문자열의 주소(@5004)를 @1003의 공간에 대입
6. 문자열 'abc'의 마지막에 'def'를 추가하려 할 경우 'abcdef' 문자열을 새로운 주소(@5005)에 저장한 뒤 변수 공간에 연결

- 변수 영역에 값을 직접 대입하지 않는 이유

  - 데이터 변환을 자유롭게 할 수 있도록 함
  - 메모리를 더욱 효율적으로 관리

## 1-4 : 기본형 데이터와 참조형 데이터

### 불변값

- 변수와 상수를 구분 짓는 요소 : **변수 영역** 메모리의 변경 가능성
  (한 번 데이터 할당이 이뤄진 변수 공간에 재할당이 가능한지)
- 불변성 여부를 구분 짓는 요소 : **데이터 영역** 메모리의 변경 가능성
- 기본형 데이터는 모두 불변값
  ![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/780a2b52-9ef2-49c0-bdcc-da5906bcb298/Untitled.png)

```jsx
let a = "abc";
a = a + "def";
// a = 'abcdef'

// 기존의 abc가 abcdef로 바뀌는 게 아님
// 새로운 문자열 abcdef를 만들어 그 주소를 변수 a에 저장

let b = 5;
let c = 5;
b = 7;
// 기존에 저장된 5 자체를 7로 바꾸는 게 아님
// 기존에 저장했던 7이 있으면 재활용, 없으면 새로 만들어서 b에 저장.
// 따라서 5와 7 모두 다른 값으로 변경 불가
```

### 가변값

- 참조형 데이터의 기본적인 성질은 가변값
- 기본형 데이터와의 차이 : **객체의 변수 영역**이 별도로 존재 (변수/데이터/객체의 변수 영역)
- 참조형 데이터 자체를 변경할 경우가 아니라 그 내부의 프로퍼티를 변경할 때만 성립
- 가비지 컬렉터 : 런타임 환경에 따라 특정 시점/메모리 사용량 포화 임박시 자동으로 수거 대상들을 수거 (참조 카운트가 0인 메모리 주소 포함)
  ![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/fc3cd1aa-3a71-48c0-bbe7-5397fe1f543d/Untitled.png)

```jsx
let obj1 = {
  a: 1,
  b: "bbb",
};
obj1.a = 2;
// 변수 영역, 데이터 영역은 변하지 않음
// 객체의 내부값만 변경
```

### 기본형 데이터와 참조형 데이터의 차이

```jsx
let a = 10;
let b = a;
//기본형 데이터 복사

let obj1 = { c: 10, d: "ddd" };
let obj2 = obj1;
//참조형 데이터 복사

b = 15;
obj2.c = 20;
//obj1.c=20으로 변경됨

a !== b;
//true

obj1 === obj2;
//true
```

- '기본형 데이터는 값을 복사하고, 참조형 데이터는 주솟값을 복사한다'는 전제 하에선
  어떤 데이터 타입이든 변수에 할당하기 위해선 주솟값을 복사해야 하기 때문에
  결국 자바스크립트의 모든 데이터 타입은 참조형 데이터
- 다만 기본형은 주솟값을 복사하는 과정이 한 번만, 참조형은 한 번 더 거치는 차이 존재
